@import models.requests.DataRequest
@import uk.gov.hmrc.govukfrontend.views.viewmodels.charactercount.CharacterCount
@import viewmodels.LabelSize

@this(
layout: templates.Layout,
formHelper: FormWithCSRF,
govukErrorSummary: GovukErrorSummary,
govukCharacterCount : GovukCharacterCount,
govukButton: GovukButton,
h1: components.h1,
saveAndContinue: components.saveAndContinue
)

@(form: Form[_], mode: Mode)(implicit request: DataRequest[_], messages: Messages)

@layout(pageTitle = title(form, messages("moreInformation.title"))) {

@formHelper(action = routes.MoreInformationController.onSubmit(request.ern, request.arc, mode)) {

@if(form.errors.nonEmpty) {
@govukErrorSummary(ErrorSummaryViewModel(form))
}

@{govukCharacterCount(CharacterCount(
id = "more-information",
name = "more-information",
maxLength = Some(350),
label = LabelViewModel(HtmlContent(heading)).asPageHeading(LabelSize.Large),
value = form("more-information").value,
errorMessage = form.errors("more-information") match {
case Nil => None
case errors => Some(ErrorMessage(content = HtmlContent(errors.map(err => messages(err.message)).mkString("<br>"))))
}
)
)}

@saveAndContinue()

}
}

@heading = {
<span class="govuk-caption-l">@messages("arc.subHeading", request.arc)</span>
@messages("moreInformation.heading")
}
